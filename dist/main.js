!function e(t,r,n){function o(a,i){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!i&&u)return u(a,!0);if(l)return l(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var l="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e){e("./modules/events").init(),e("./modules/localStorage").init()},{"./modules/events":4,"./modules/localStorage":5}],2:[function(e,t){function r(e){var t=0,r=!0;return e.forEach(function(e){t+=e.weight,e.modules.forEach(function(e){return e.percentage<0||e.percentage>100?void(r=!1):void 0})}),r?t>0&&100>=t?(i.style.display="none",!0):(i.style.display="block",!1):!1}function n(e){var t=0,r=0;return e.forEach(function(e){r+=e.weight,t+=e.percentage*e.weight}),Math.round(t/r*100)/100}function o(e,t,r){var e=e.querySelector(".results"),n=e.querySelector(".avg"),o=e.querySelector(".weight");n.innerHTML=t+"%",o.innerHTML=r+"%"}var l=e("./domParser"),a=e("./scoreMeter"),i=document.querySelector("#Errors .weights");t.exports.calculate=function(e){e=e||l.parseLevels();var t=0,i=document.querySelectorAll(".level");r(e)&&(e.forEach(function(e,r){var l=n(e.modules),a=Math.round(e.weight/100*l*100)/100;o(i[r],l,a),t+=a}),a.update(t))}},{"./domParser":3,"./scoreMeter":6}],3:[function(e,t){var r=e("./templates"),n=document.getElementById("Levels"),o=function(e){for(var t=[],r=0,n=e.length;n>r;r++){var o=e[r],l=parseFloat(o.querySelector(".ratio input").value,10)||1,a=parseFloat(o.querySelector(".percentage input").value,10),i=o.querySelector(".name input").value;isNaN(a)||t.push({name:i,weight:l,percentage:a})}return t};t.exports.parseLevels=function(){for(var e=document.querySelectorAll(".level"),t=[],r=0,n=e.length;n>r;r++){var l=e[r],a={weight:0,modules:[]};if(a.weight=parseFloat(l.querySelector(".level-weight input").value,10)||0,a.weight){var i=o(l.querySelectorAll(".module"));i.length>0&&(a.modules=i,t.push(a))}}return t},t.exports.restorePrev=function(e){for(var t=0,o=n.children.length;o>t;t++)n.removeChild(n.children[t]);e.forEach(function(e){var t=r.level(),o=t.querySelector(".modules"),l=o.querySelectorAll(".module");t.querySelector(".level-weight input").value=e.weight,e.modules.forEach(function(e,t){var n=l[t]||r.module();n.querySelector(".name input").value=e.name||"",n.querySelector(".percentage input").value=e.percentage||"",n.querySelector(".ratio input").value=e.weight||"",o.appendChild(n)}),n.appendChild(t)})}},{"./templates":7}],4:[function(e,t){function r(e){e.addEventListener("click",function(){var e=this.parentElement.children[1],t=o.module();e.appendChild(t)})}var n=e("./calculator"),o=e("./templates"),l={save:document.getElementById("Save"),retrieve:document.getElementById("Retrieve")};t.exports.init=function(){document.getElementById("Add-Level").addEventListener("click",function(){var e=o.level();document.getElementById("Levels").appendChild(e)}),document.getElementById("Calculate").addEventListener("click",function(){window.scrollTo(0,0),n.calculate(),l.retrieve.style.display="none",l.save.style.display="block"}),r(document.querySelector(".level button"))},t.exports.addBtnHandler=r},{"./calculator":2,"./templates":7}],5:[function(e,t){var r,n,o=e("./domParser"),l=e("./calculator"),a="RESULTS_DATA",i={saveBtn:document.getElementById("Save"),retrieveBtn:document.getElementById("Retrieve")},u=function(){if(r)return r;try{var e=n.getItem(a);return e?r=JSON.parse(e):null}catch(t){return console.log("ERROR localStorage.retrieve() "+t),null}},c=function(e){r=e,n.setItem(a,JSON.stringify(e))},s=function(){i.saveBtn.addEventListener("click",function(){c(o.parseLevels());var e=i.saveBtn,t=e.innerHTML;e.innerHTML="Saved!",e.classList.add("icon-ok"),setTimeout(function(){e.innerHTML=t,e.classList.remove("icon-ok")},700)}),i.retrieveBtn.addEventListener("click",function(){var e=u();o.restorePrev(e),l.calculate(e),i.retrieveBtn.style.display="none",i.saveBtn.style.display="block"})};t.exports={init:function(){try{n=Android}catch(e){n=window.localStorage||null}n&&(s(),u()?i.retrieveBtn.style.display="block":i.saveBtn.style.display="block")},store:c,retrieve:u}},{"./calculator":2,"./domParser":3}],6:[function(e,t){function r(e){var t=["-webkit-transform","-moz-transform","-ms-transform","-o-transform","transform"];t.forEach(function(t){o.style[t]="translateX("+e+"px)"})}var n=document.getElementById("Score"),o=n.querySelector(".marker"),l=n.querySelector(".value");t.exports.update=function(e){e=Math.round(100*e)/100;var t=n.scrollWidth/100*e;r(t-1.5),l.innerHTML=e+"%"}},{}],7:[function(e,t){var r=e("./events"),n={tooltip:'<span class="ratio tooltip" title="Half module: 0.5, Single module: 1, Double module: 2, etc">Weight<input></span>',noTooltip:'<span class="ratio">Weight<input></span>'};t.exports={module:function(){var e=document.querySelector(".module").innerHTML;return e=e.replace(n.tooltip,n.noTooltip),function(){var t=document.createElement("div");return t.innerHTML=e,t.className="module",t}}(),level:function(){var e=document.querySelector(".level").innerHTML;return e=e.replace(n.tooltip,n.noTooltip),function(){var t=document.getElementById("Levels").children.length+1,n="Year "+t,o=document.createElement("div"),l=e.replace("Year 1",n);return o.className="level lvl",o.innerHTML=l,r.addBtnHandler(o.children[2]),o}}()}},{"./events":4}]},{},[1]);