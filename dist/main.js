!function e(t,n,r){function o(l,u){if(!n[l]){if(!t[l]){var i="function"==typeof require&&require;if(!u&&i)return i(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+l+"'")}var c=n[l]={exports:{}};t[l][0].call(c.exports,function(e){var n=t[l][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[l].exports}for(var a="function"==typeof require&&require,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(e){function t(){var e=o.getInputData();return l.validate(e)?(o.clearErrors(),void o.updateScore(a.calculate(e))):o.showError("Check each years <em>worth</em> percentages, something isn't quite right.")}function n(){u.set(o.getInputData())}function r(){o.setInputData(u.get())}var o=e("./view"),a=e("./modules/calculator"),l=e("./modules/validator"),u=e("./modules/localStorage");!function(){u.isAvailable()&&(u.get()?o.showOpenButton():o.showSaveButton()),o.setButtonListener("calculate",t),o.setButtonListener("save",n),o.setButtonListener("open",r),o.init()}()},{"./modules/calculator":2,"./modules/localStorage":3,"./modules/validator":5,"./view":6}],2:[function(e,t){function n(e){var t=0,n=0;return e.forEach(function(e){n+=e.weight,t+=e.percentage*e.weight}),Math.round(t/n*100)/100}{var r=e("./scoreMeter");document.querySelector("#Errors .weights")}t.exports.calculate=function(e){{var t=0;document.querySelectorAll(".level")}e.forEach(function(e){var r=n(e.modules),o=Math.round(e.weight/100*r*100)/100;t+=o}),r.update(t)}},{"./scoreMeter":4}],3:[function(e,t){var n="RESULTS_DATA",r=null,o=null;!function(){try{o=Android}catch(e){o=window.localStorage||null}}(),t.exports={isAvailable:function(){return null!==o},get:function(){if(r)return r;try{var e=o.getItem(n);return e?r=JSON.parse(e):null}catch(t){return console.log("ERROR localStorage.retrieve() "+t),null}},set:function(e){r=e,o.setItem(n,JSON.stringify(e))}}},{}],4:[function(e,t){function n(e){var t=["-webkit-transform","-moz-transform","-ms-transform","-o-transform","transform"];t.forEach(function(t){o.style[t]="translateX("+e+"px)"})}var r=document.getElementById("Score"),o=r.querySelector(".marker"),a=r.querySelector(".value");t.exports.update=function(e){e=Math.round(100*e)/100;var t=r.scrollWidth/100*e;n(t-1.5),a.innerHTML=e+"%"}},{}],5:[function(e,t){t.exports={validate:function(e){if(!e.length)return!1;var t=0;return e.forEach(function(e){t+=e.weight}),t>0&&100>=t}}},{}],6:[function(e,t){function n(){y.btns.calculate.addEventListener("click",r),y.btns.save.addEventListener("click",o),y.btns.open.addEventListener("click",a),y.btns.addYear.addEventListener("click",l),u(y.yearsContainer.children[0])}function r(){g.calculate&&g.calculate(),y.btns.open.style.display="none",y.btns.save.style.display="block"}function o(){var e=y.btns.save,t=e.innerHTML;g.save&&g.save(),e.innerHTML="Saved!",e.classList.add("icon-ok"),setTimeout(function(){e.innerHTML=t,e.classList.remove("icon-ok")},700)}function a(){g.open&&g.open(),r()}function l(){var e=h.year();u(e),document.getElementById("Years").appendChild(e)}function u(e){e.querySelector("button").addEventListener("click",function(){var e=this.parentElement.children[1],t=h.module();e.appendChild(t)})}function i(){y.btns.save.style.display="none",y.btns.open.style.display="block"}function c(){y.btns.open.style.display="none",y.btns.save.style.display="block"}function s(e,t){g[e]=t}function d(){function e(e){for(var t=[],n=0,r=e.length;r>n;n++){var o=e[n],a=parseFloat(o.querySelector(".ratio input").value,10)||1,l=parseFloat(o.querySelector(".percentage input").value,10),u=o.querySelector(".name input").value;isNaN(l)||t.push({name:u,weight:a,percentage:l})}return t}for(var t=document.querySelectorAll(".year"),n=[],r=0,o=t.length;o>r;r++){var a=t[r],l={weight:0,modules:[]};if(l.weight=parseFloat(a.querySelector(".year-weight input").value,10)||0,l.weight){var u=e(a.querySelectorAll(".module"));u.length>0&&(l.modules=u,n.push(l))}}return n}function p(e){for(var t=0,n=y.yearsContainer.children.length;n>t;t++)y.yearsContainer.removeChild(y.yearsContainer.children[t]);e.forEach(function(e){var t=h.year(),n=t.querySelector(".modules"),r=n.querySelectorAll(".module");t.querySelector(".year-weight input").value=e.weight,e.modules.forEach(function(e,t){var o=r[t]||h.module();o.querySelector(".name input").value=e.name||"",o.querySelector(".percentage input").value=e.percentage||"",o.querySelector(".ratio input").value=e.weight||"",n.appendChild(o)}),y.yearsContainer.appendChild(t)})}function m(){for(var e=0,t=y.errors.children.length;t>e;e++)y.errors.removeChild(y.errors.children[e])}function v(e){var t=document.createElement("div");t.innerHTML=e,y.errors.appendChild(t)}function f(){}var h=e("./templates"),y={yearsContainer:document.getElementById("Years"),errors:document.getElementById("Errors"),score:document.getElementById("Score"),marker:document.querySelector("#Score .marker"),value:document.querySelector("#Score .marker .value"),btns:{calculate:document.getElementById("Calculate"),save:document.getElementById("Save"),open:document.getElementById("Open"),addYear:document.getElementById("Add-Year")}},g={calculate:null,save:null,open:null};t.exports={init:n,setButtonListener:s,showOpenButton:i,showSaveButton:c,getInputData:d,setInputData:p,clearErrors:m,showError:v,updateScore:f}},{"./templates":7}],7:[function(e,t){var n={tooltip:'<span class="ratio tooltip" title="Half module: 0.5, Single module: 1, Double module: 2, etc">Weight<input></span>',noTooltip:'<span class="ratio">Weight<input></span>'};t.exports={module:function(){var e=document.querySelector(".module").innerHTML;return e=e.replace(n.tooltip,n.noTooltip),function(){var t=document.createElement("div");return t.innerHTML=e,t.className="module",t}}(),year:function(){var e=document.querySelector(".year").innerHTML;return e=e.replace(n.tooltip,n.noTooltip),function(){var t=document.getElementById("Years").children.length+1,n="Year "+t,r=document.createElement("div"),o=e.replace("Year 1",n);return r.className="year card",r.innerHTML=o,r}}()}},{}]},{},[1]);